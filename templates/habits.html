{% extends "base.html" %}
{% block title %}Habits{% endblock %}

{% block content %}
<h1>Your Habits</h1>

<!-- Add habit form -->
<!-- Add Habit Form -->
<form method="POST" class="form card">
    <label for="habit_name">Habit Name</label>
    <input type="text" id="habit_name" name="name" placeholder="Habit Name" required>

    <label for="habit_description">Description</label>
    <input type="text" id="description" name="description" placeholder="Description">

    <button type="submit" class="btn-checkin">Add Habit</button>
</form>

<h2>Habit List</h2>
<ul class="habit-list">
    {% if habits %}
        {% for habit in habits %}
        <li class="habit-item">
            <div class="habit-info">
                <b>{{ habit['name'] }}</b>
                {% if habit['description'] %}
                    - {{ habit['description'] }}
                {% endif %}
            </div>
            <div class="habit-status">
                âœ… Today: {{ "Done" if habit['completed_today'] else "Not Done" }}
                | ðŸ”¥ Streak: {{ habit['streak'] }} days
            </div>
            <div class="habit-actions">
                <a href="{{ url_for('mark_progress', habit_id=habit['id']) }}">
                    {{ "Unmark" if habit['completed_today'] else "Mark as Done" }}
                </a>
                | <a href="{{ url_for('edit_habit', habit_id=habit['id']) }}">Edit</a>
                | <a href="{{ url_for('delete_habit', habit_id=habit['id']) }}">Delete</a>
            </div>
        </li>
        {% endfor %}
    {% else %}
        <li>No habits yet. Add one above!</li>
    {% endif %}
</ul>

<a href="{{ url_for('dashboard') }}">Back to Dashboard</a>
{% endblock %}
